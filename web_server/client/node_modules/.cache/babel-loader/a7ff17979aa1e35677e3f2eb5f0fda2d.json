{"ast":null,"code":"import _classCallCheck from \"/home/kev/Projects/week5_demo/web_server/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/kev/Projects/week5_demo/web_server/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/kev/Projects/week5_demo/web_server/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/kev/Projects/week5_demo/web_server/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/kev/Projects/week5_demo/web_server/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/kev/Projects/week5_demo/web_server/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/kev/Projects/week5_demo/web_server/client/src/NewsPanel/NewsPanel.js\";\nimport './NewsPanel.css';\nimport React from 'react';\nimport NewsCard from '../NewsCard/NewsCard';\nimport _ from 'lodash';\n\nvar NewsPanel =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NewsPanel, _React$Component);\n\n  function NewsPanel() {\n    var _this;\n\n    _classCallCheck(this, NewsPanel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewsPanel).call(this));\n    _this.state = {\n      news: null\n    };\n    _this.handleScroll = _this.handleScroll.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(NewsPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadMoreNews();\n      this.loadMoreNews = _.debounce(this.loadMoreNews, 1000);\n      window.addEventListener('scroll', this.handleScroll);\n    }\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll() {\n      // different browser\n      var scrollY = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;\n\n      if (window.innerHeight + scrollY >= document.body.offsetHeight - 50) {\n        console.log('Loading more news');\n        this.loadMoreNews();\n      }\n    }\n  }, {\n    key: \"loadMoreNews\",\n    value: function loadMoreNews() {\n      var _this2 = this;\n\n      var request = new Request('http://localhost:3000/news', {\n        method: 'GET',\n        cache: false\n      });\n      fetch(request).then(function (res) {\n        return res.json();\n      }).then(function (news) {\n        _this2.setState({\n          news: _this2.state.news ? _this2.state.news.concat(news) : news\n        });\n      });\n    }\n  }, {\n    key: \"renderNews\",\n    value: function renderNews() {\n      var news_list = this.state.news.map(function (news) {\n        return React.createElement(\"a\", {\n          className: \"list-group-item\",\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }, React.createElement(NewsCard, {\n          news: news,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }));\n      });\n      return React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"list-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, news_list));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.news) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, this.renderNews());\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          id: \"msg-app-loading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, \"Loading...\"));\n      }\n    }\n  }]);\n\n  return NewsPanel;\n}(React.Component);\n\nexport default NewsPanel;","map":{"version":3,"sources":["/home/kev/Projects/week5_demo/web_server/client/src/NewsPanel/NewsPanel.js"],"names":["React","NewsCard","_","NewsPanel","state","news","handleScroll","bind","loadMoreNews","debounce","window","addEventListener","scrollY","pageYOffset","document","documentElement","scrollTop","innerHeight","body","offsetHeight","console","log","request","Request","method","cache","fetch","then","res","json","setState","concat","news_list","map","renderNews","Component"],"mappings":";;;;;;;AAAA,OAAO,iBAAP;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,CAAP,MAAc,QAAd;;IAEMC,S;;;;;AACF,uBAAc;AAAA;;AAAA;;AACV;AACA,UAAKC,KAAL,GAAa;AAAEC,MAAAA,IAAI,EAAC;AAAP,KAAb;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,uDAApB;AAHU;AAIb;;;;wCAEmB;AAChB,WAAKC,YAAL;AACA,WAAKA,YAAL,GAAoBN,CAAC,CAACO,QAAF,CAAW,KAAKD,YAAhB,EAA8B,IAA9B,CAApB;AACAE,MAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKL,YAAvC;AACH;;;mCAEc;AACX;AACA,UAAIM,OAAO,GAAGF,MAAM,CAACE,OAAP,IACVF,MAAM,CAACG,WADG,IAEVC,QAAQ,CAACC,eAAT,CAAyBC,SAF7B;;AAGA,UAAKN,MAAM,CAACO,WAAP,GAAqBL,OAAtB,IAAmCE,QAAQ,CAACI,IAAT,CAAcC,YAAd,GAA6B,EAApE,EAAyE;AACrEC,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,aAAKb,YAAL;AACH;AACJ;;;mCAEc;AAAA;;AACX,UAAIc,OAAO,GAAG,IAAIC,OAAJ,CAAY,4BAAZ,EAA0C;AACpDC,QAAAA,MAAM,EAAE,KAD4C;AAEpDC,QAAAA,KAAK,EAAE;AAF6C,OAA1C,CAAd;AAKAC,MAAAA,KAAK,CAACJ,OAAD,CAAL,CACKK,IADL,CACU,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OADV,EAEKF,IAFL,CAEU,UAACtB,IAAD,EAAU;AACZ,QAAA,MAAI,CAACyB,QAAL,CAAc;AACVzB,UAAAA,IAAI,EAAC,MAAI,CAACD,KAAL,CAAWC,IAAX,GAAkB,MAAI,CAACD,KAAL,CAAWC,IAAX,CAAgB0B,MAAhB,CAAuB1B,IAAvB,CAAlB,GAAiDA;AAD5C,SAAd;AAGH,OANL;AAOH;;;iCAEY;AACT,UAAM2B,SAAS,GAAG,KAAK5B,KAAL,CAAWC,IAAX,CAAgB4B,GAAhB,CAAoB,UAAS5B,IAAT,EAAe;AACjD,eACI;AAAG,UAAA,SAAS,EAAC,iBAAb;AAA+B,UAAA,IAAI,EAAC,GAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,QAAD;AAAU,UAAA,IAAI,EAAEA,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CADJ;AAKH,OANiB,CAAlB;AAQA,aACI;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK2B,SADL,CADJ,CADJ;AAOH;;;6BAEQ;AACL,UAAI,KAAK5B,KAAL,CAAWC,IAAf,EAAqB;AACjB,eACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACK,KAAK6B,UAAL,EADL,CADJ;AAKH,OAND,MAMO;AACH,eACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,EAAE,EAAC,iBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,CADJ;AAOH;AACJ;;;;EAzEmBlC,KAAK,CAACmC,S;;AA4E9B,eAAehC,SAAf","sourcesContent":["import './NewsPanel.css';\nimport React from 'react';\nimport NewsCard from '../NewsCard/NewsCard';\nimport _ from 'lodash';\n\nclass NewsPanel extends React.Component {\n    constructor() {\n        super();\n        this.state = { news:null };\n        this.handleScroll = this.handleScroll.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadMoreNews();\n        this.loadMoreNews = _.debounce(this.loadMoreNews, 1000);\n        window.addEventListener('scroll', this.handleScroll);\n    }\n\n    handleScroll() {\n        // different browser\n        let scrollY = window.scrollY ||\n            window.pageYOffset ||\n            document.documentElement.scrollTop;\n        if ((window.innerHeight + scrollY) >= (document.body.offsetHeight - 50)) {\n            console.log('Loading more news');\n            this.loadMoreNews();\n        }\n    }\n\n    loadMoreNews() {\n        let request = new Request('http://localhost:3000/news', {\n            method: 'GET',\n            cache: false\n        });\n\n        fetch(request)\n            .then((res) => res.json())\n            .then((news) => {\n                this.setState({\n                    news:this.state.news ? this.state.news.concat(news) : news,\n                });\n            });\n    }\n\n    renderNews() {\n        const news_list = this.state.news.map(function(news) {\n            return(\n                <a className='list-group-item' href=\"#\">\n                    <NewsCard news={news} />\n                </a>\n            );\n        });\n\n        return(\n            <div className='container-fluid'>\n                <div className='list-group'>\n                    {news_list}\n                </div>\n            </div>\n        )\n    }\n\n    render() {\n        if (this.state.news) {\n            return(\n                <div>\n                    {this.renderNews()}\n                </div>\n            );\n        } else {\n            return(\n                <div>\n                    <div id='msg-app-loading'>\n                        Loading...\n                    </div>\n                </div>\n            );\n        }\n    }\n}\n\nexport default NewsPanel;"]},"metadata":{},"sourceType":"module"}